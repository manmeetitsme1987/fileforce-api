<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="fileforce.MapperWorker.CommonMapperWorker">
	
	<resultMap id="masterDetail" type="fileforce.Model.Response.MasterTableResponseWorker">
  		<id property="orgId" jdbcType="VARCHAR" column="orgId"/>
    	<result property="schemaName" jdbcType="VARCHAR" column="schemaName" />
	</resultMap>
	
	<resultMap id="contentVersion" type="fileforce.Model.Response.GoogleDriveRequestWorker">
  		<id column="id" jdbcType="VARCHAR" property="id" />
    	<result column="externalId" jdbcType="VARCHAR" property="externalId" />
    	<result column="fileExtension" jdbcType="VARCHAR" property="fileExtension" />
    	<result column="fileType" jdbcType="VARCHAR" property="fileType" />
    	<result column="firstPublicationId" jdbcType="VARCHAR" property="firstPublicationId" />
  		<result column="title" jdbcType="VARCHAR" property="title" />
  		<result column="contentDocumentId" jdbcType="VARCHAR" property="contentDocumentId" />
  	</resultMap>
	
	<select id="getMasterData" parameterType="String" resultMap="masterDetail">
			select 
		    b.org_id as "orgId",
		    b.schema_val as "schemaName" 
		    from master_table b  where b.org_id = #{orgId} 
	</select>
	
	<select id="getContentVersionData" parameterType="String" resultMap="contentVersion">
	   Select 
	   c.Id as "id",
	   c.External_Id__c as "externalId",
	   bl.FileExtension as "fileExtension",
	   c.FileType as "fileType",
	   c.FirstPublishLocationId as "firstPublicationId",
	   c.Title as "title",
	   c.ContentDocumentId as "contentDocumentId" 
	   from #{schemaName}.ContentVersion c where id != null
  </select>
  	</mapper>